<odoo>
    <data>
        <record id="view_planner_calendar_task" model="ir.ui.view">
            <field name="name">project.planner.calendar</field>
            <field name="model">project.task</field>
            <field eval="2" name="priority"/>
            <field name="arch" type="xml">
                <calendar string="Project Planner" date_start="date_deadline"
                          mode="month" event_limit="5"
                          hide_time="true" quick_add="true">
                    <field name="user_id" avatar_field="image_128"/>
                    <field name="date_deadline"/>
                    <field name="project_id"/>
                    <field name="priority" widget="priority"/>
                    <field name="stage_id"/>
                </calendar>
            </field>
        </record>
        <record id="view_planner_calendar_meeting" model="ir.ui.view">
            <field name="name">project.planner.calendar.meeting</field>
            <field name="model">calendar.event</field>
            <field eval="2" name="priority"/>
            <field name="arch" type="xml">
                <calendar string="Project Planner" date_start="start"
                          mode="month" event_limit="5"
                          hide_time="true" quick_add="true">
                    <field name="user_id" avatar_field="image_128"/>
                    <field name="attendee_status"/>
                    <field name="partner_id"/>
                    <field name="partner_ids" widget="many2many_tags_avatar" write_model="calendar.contacts" write_field="partner_id" avatar_field="image_128"/>
                    <field name="is_highlighted" invisible="1"/>
                    <field name="description"/>
                </calendar>
            </field>
        </record>
        <record id="view_planner_calendar_project" model="ir.ui.view">
            <field name="name">project.planner.calendar.project</field>
            <field name="model">project.project</field>
            <field eval="2" name="priority"/>
            <field name="arch" type="xml">
                <calendar string="Project Planner" date_start="project_end_date"
                          mode="month" event_limit="5"
                          hide_time="true" quick_add="true">
                    <field name="user_id" avatar_field="image_128"/>
                    <field name="project_end_date"/>
                    <field name="task_ids"/>
                </calendar>
            </field>
        </record>
        <record id="view_planner_tree" model="ir.ui.view">
            <field name="name">project.planner.tree</field>
            <field name="model">project.task</field>
            <field eval="2" name="priority"/>
            <field name="arch" type="xml">
                <tree string="Project Planner">
                    <field name="user_id" avatar_field="image_128"/>
                    <field name="date_deadline"/>
                    <field name="project_id"/>
                    <field name="priority" widget="priority"/>
                    <field name="stage_id"/>
                    <field name="user_id" avatar_field="image_128"/>
                    <field name="date_deadline" invisible="1"/>
                    <field name="project_id"/>
                    <field name="stage_id" />
                    <field name="calendar_event_id"/>
                    <field name="project_end_date" string="Project End Date"/>
                    <field name="create_plan" string="Type of Event"/>
                </tree>
            </field>
        </record>

        <record id="view_planner_form" model="ir.ui.view">
            <field name="name">project.planner.form</field>
            <field name="model">project.task</field>
            <field name="arch" type="xml">
                <form string="Project Planner">
                    <sheet>
                        <field name="company_id" invisible="1"/>
                        <group><field name="create_plan" string="Type of Event"/></group>
                        <group><field name="user_id" avatar_field="image_128"/></group>
                        <group>
                            <field name="project_id" attrs="{'invisible': [('create_plan', '!=', 'project')]}"/>
                            <field name="project_end_date" string="Project End Date" attrs="{'invisible': [('create_plan', '!=', 'project')]}"/>
                        </group>
                        <group>
                            <field name="parent_id" attrs="{'invisible': [('create_plan', '!=', 'task')]}"/>
                            <field name="date_deadline" attrs="{'invisible': [('create_plan', '!=', 'task')]}"/>
                        </group>
                        <group>
                            <field name="calendar_event_id" attrs="{'invisible': [('create_plan', '!=', 'meeting')]}"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>


        <record id="project_planner_search_form" model="ir.ui.view">
            <field name="name">project.planner.search.form</field>
            <field name="model">project.task</field>
            <field name="arch" type="xml">
                <search string="Project">
                    <!--                    <field name="user_id"/>-->
                    <!--                    <field name="stage_id"/>-->
                    <!--                    <field name="date_deadline"/>-->
                    <group>
                        <filter string="Assigned to" name="user"/>
                        <filter string="Project" name="project"/>
                        <filter string="Creation Date" name="group_create_date"/>
                        <filter string="Company" name="company"/>
                    </group>
                </search>
            </field>
        </record>

        <record id="action_project_planner" model="ir.actions.act_window">
            <field name="name">Project Planning</field>
            <field name="res_model">project.task</field>
            <field name="type">ir.actions.act_window</field>
            <field name="search_view_id" ref="project_phases_v13.project_planner_search_form"/>
            <field name="view_id" ref="view_planner_calendar_task"/>
            <field name="view_mode">calendar</field>
        </record>
        <record id="action_project_planner2" model="ir.actions.act_window">
            <field name="name">Project Planning</field>
            <field name="res_model">project.project</field>
            <field name="type">ir.actions.act_window</field>
            <field name="search_view_id" ref="project_phases_v13.project_planner_search_form"/>
            <field name="view_id" ref="view_planner_calendar_task"/>
            <field name="view_mode">calendar</field>
        </record>
        <record id="action_project_planner3" model="ir.actions.act_window">
            <field name="name">Project Planning</field>
            <field name="res_model">calendar.event</field>
            <field name="type">ir.actions.act_window</field>
            <field name="search_view_id" ref="project_phases_v13.project_planner_search_form"/>
            <field name="view_id" ref="view_planner_calendar_task"/>
            <field name="view_mode">calendar</field>
        </record>
        <menuitem id="project_planner_menu" name="Project Planner" parent="project.menu_main_pm" action="action_project_planner" sequence="12"/>
    </data>
</odoo>